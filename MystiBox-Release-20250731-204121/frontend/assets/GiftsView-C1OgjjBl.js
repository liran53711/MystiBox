import{d as A,q as U,u as j,r as c,f as G,c as o,a as e,m as d,y as u,t as l,F as b,i as _,p as y,e as w,o as a}from"./index-o0ffgrYm.js";const R={class:"container mx-auto px-4 py-8"},M={key:0,class:"text-center py-16"},N={key:1},T={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},$={class:"card p-6 text-center"},z={class:"text-2xl font-bold",style:{color:"var(--color-accent)"}},B={class:"card p-6 text-center"},L={class:"text-2xl font-bold",style:{color:"var(--color-accent)"}},V={class:"card p-6 text-center"},O={class:"text-2xl font-bold",style:{color:"var(--color-accent)"}},F={class:"card mb-8"},q={class:"border-b",style:{"border-color":"var(--color-border)"}},E={class:"flex space-x-8 px-6"},H=["onClick"],J={class:"p-6"},K={key:0},P={key:0,class:"text-center py-16"},Q={key:1,class:"space-y-4"},W={class:"flex items-start justify-between"},X={class:"flex items-start space-x-4"},Y={class:"w-16 h-16 rounded-lg overflow-hidden"},Z=["src","alt"],ee={class:"flex-1"},te={class:"flex items-center space-x-2 mb-2"},se={class:"font-semibold",style:{color:"var(--color-text-primary)"}},oe={key:1,class:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded"},ae={class:"text-sm mb-2",style:{color:"var(--color-text-secondary)"}},le={class:"font-medium"},re={key:0,class:"text-sm italic mb-2",style:{color:"var(--color-text-secondary)"}},ne={class:"text-xs",style:{color:"var(--color-text-secondary)"}},ie={class:"flex flex-col space-y-2"},ce=["onClick"],de={key:1,class:"text-sm text-green-600 font-medium"},me={key:1},pe={key:0,class:"text-center py-16"},ye={key:1,class:"space-y-4"},xe={class:"flex items-start space-x-4"},ve={class:"w-16 h-16 rounded-lg overflow-hidden"},ue=["src","alt"],be={class:"flex-1"},_e={class:"flex items-center space-x-2 mb-2"},he={class:"font-semibold",style:{color:"var(--color-text-primary)"}},fe={key:1,class:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded"},ke={class:"text-sm mb-2",style:{color:"var(--color-text-secondary)"}},ge={class:"font-medium"},we={key:0,class:"text-sm italic mb-2",style:{color:"var(--color-text-secondary)"}},Se={class:"flex items-center justify-between"},Ce={class:"text-xs",style:{color:"var(--color-text-secondary)"}},De={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ie={class:"modal-content p-6 max-w-md w-full mx-4 text-center"},Ae={key:0,class:"mb-6"},Ue={class:"w-24 h-24 mx-auto mb-4 rounded-lg overflow-hidden"},je=["src","alt"],Ge={class:"font-semibold mb-2"},Re={class:"text-sm",style:{color:"var(--color-text-secondary)"}},Te=A({__name:"GiftsView",setup(Me){const S=U(),h=j(),m=c("received"),x=c(!1),r=c(null),C=[{id:"received",name:"收到的礼物"},{id:"sent",name:"发送的礼物"}],p=c([{id:"1",type:"pet",item:{id:"1",nickname:"小可爱",pet:{id:"1",name:"小精灵",rarity:"R",babyImageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=300&fit=crop"}},sender:{id:"2",username:"player1"},message:"送给你一只可爱的小精灵！",claimed:!1,createdAt:new Date(Date.now()-2*60*60*1e3).toISOString()},{id:"2",type:"box",item:{id:1,name:"森林精灵系列",price:100,image:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=100&h=100&fit=crop"},sender:{id:"3",username:"collector"},message:"希望你能抽到好宠物！",claimed:!0,createdAt:new Date(Date.now()-24*60*60*1e3).toISOString()}]),v=c([{id:"3",type:"pet",item:{id:"2",nickname:"小蓝",pet:{id:"2",name:"海星宝宝",rarity:"N",babyImageUrl:"https://images.unsplash.com/photo-1583212292454-1fe6229603b7?w=300&h=300&fit=crop"}},recipient:{id:"4",username:"petlover"},message:"这只海星很可爱，送给你！",claimed:!0,createdAt:new Date(Date.now()-6*60*60*1e3).toISOString()}]),D=G(()=>p.value.filter(n=>!n.claimed).length),f=n=>({N:"rarity-badge-n",R:"rarity-badge-r",SR:"rarity-badge-sr",SSR:"rarity-badge-ssr",UR:"rarity-badge-ur"})[n]||"rarity-badge-n",k=n=>{const s=new Date(n),i=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60));if(i<1)return"刚刚";if(i<24)return`${i}小时前`;{const g=Math.floor(i/24);return g<30?`${g}天前`:s.toLocaleDateString()}},I=n=>{n.claimed=!0,r.value=n,x.value=!0,console.log("领取礼物:",n),n.type==="pet"||n.type};return(n,s)=>(a(),o("div",R,[s[17]||(s[17]=e("div",{class:"text-center mb-8"},[e("h1",{class:"mb-4",style:{"font-family":"var(--font-heading)","font-size":"var(--text-4xl)",color:"var(--color-text-primary)","font-weight":"900"}}," 🎁 礼物中心 "),e("p",{style:{"font-size":"var(--text-lg)",color:"var(--color-text-secondary)","font-family":"var(--font-body)"}}," 管理你的礼物收发记录 ")],-1)),u(S).isAuthenticated?(a(),o("div",N,[e("div",T,[e("div",$,[s[5]||(s[5]=e("div",{class:"text-3xl mb-2"},"📥",-1)),e("div",z,l(p.value.length),1),s[6]||(s[6]=e("div",{class:"text-sm",style:{color:"var(--color-text-secondary)"}},"收到的礼物",-1))]),e("div",B,[s[7]||(s[7]=e("div",{class:"text-3xl mb-2"},"📤",-1)),e("div",L,l(v.value.length),1),s[8]||(s[8]=e("div",{class:"text-sm",style:{color:"var(--color-text-secondary)"}},"发送的礼物",-1))]),e("div",V,[s[9]||(s[9]=e("div",{class:"text-3xl mb-2"},"⏳",-1)),e("div",O,l(D.value),1),s[10]||(s[10]=e("div",{class:"text-sm",style:{color:"var(--color-text-secondary)"}},"待领取礼物",-1))])]),e("div",F,[e("div",q,[e("nav",E,[(a(),o(b,null,_(C,t=>e("button",{key:t.id,onClick:i=>m.value=t.id,class:y(["py-4 px-2 border-b-2 font-medium text-sm transition-colors",m.value===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},l(t.name),11,H)),64))])]),e("div",J,[m.value==="received"?(a(),o("div",K,[p.value.length===0?(a(),o("div",P,s[11]||(s[11]=[e("div",{class:"text-6xl mb-4"},"📥",-1),e("h3",{class:"text-xl font-semibold mb-2"},"暂无收到的礼物",-1),e("p",{class:"text-gray-600"},"当朋友送你礼物时，会在这里显示",-1)]))):(a(),o("div",Q,[(a(!0),o(b,null,_(p.value,t=>(a(),o("div",{key:t.id,class:"card p-4"},[e("div",W,[e("div",X,[e("div",Y,[e("img",{src:t.type==="pet"?t.item.pet.babyImageUrl:t.item.image,alt:t.type==="pet"?t.item.pet.name:t.item.name,class:"w-full h-full object-cover"},null,8,Z)]),e("div",ee,[e("div",te,[e("h4",se,l(t.type==="pet"?t.item.nickname||t.item.pet.name:t.item.name),1),t.type==="pet"?(a(),o("span",{key:0,class:y(["rarity-badge text-xs",f(t.item.pet.rarity)])},l(t.item.pet.rarity),3)):(a(),o("span",oe," 盲盒 "))]),e("p",ae,[s[12]||(s[12]=w(" 来自 ",-1)),e("span",le,l(t.sender.username),1)]),t.message?(a(),o("p",re,' "'+l(t.message)+'" ',1)):d("",!0),e("p",ne,l(k(t.createdAt)),1)])]),e("div",ie,[t.claimed?(a(),o("span",de," 已领取 ")):(a(),o("button",{key:0,onClick:i=>I(t),class:"btn btn-primary text-sm"}," ✅ 领取 ",8,ce))])])]))),128))]))])):m.value==="sent"?(a(),o("div",me,[v.value.length===0?(a(),o("div",pe,s[13]||(s[13]=[e("div",{class:"text-6xl mb-4"},"📤",-1),e("h3",{class:"text-xl font-semibold mb-2"},"暂无发送的礼物",-1),e("p",{class:"text-gray-600"},"快去给朋友送个礼物吧！",-1)]))):(a(),o("div",ye,[(a(!0),o(b,null,_(v.value,t=>(a(),o("div",{key:t.id,class:"card p-4"},[e("div",xe,[e("div",ve,[e("img",{src:t.type==="pet"?t.item.pet.babyImageUrl:t.item.image,alt:t.type==="pet"?t.item.pet.name:t.item.name,class:"w-full h-full object-cover"},null,8,ue)]),e("div",be,[e("div",_e,[e("h4",he,l(t.type==="pet"?t.item.nickname||t.item.pet.name:t.item.name),1),t.type==="pet"?(a(),o("span",{key:0,class:y(["rarity-badge text-xs",f(t.item.pet.rarity)])},l(t.item.pet.rarity),3)):(a(),o("span",fe," 盲盒 "))]),e("p",ke,[s[14]||(s[14]=w(" 送给 ",-1)),e("span",ge,l(t.recipient.username),1)]),t.message?(a(),o("p",we,' "'+l(t.message)+'" ',1)):d("",!0),e("div",Se,[e("p",Ce,l(k(t.createdAt)),1),e("span",{class:y(["text-xs px-2 py-1 rounded",t.claimed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(t.claimed?"已领取":"待领取"),3)])])])]))),128))]))])):d("",!0)])])])):(a(),o("div",M,[s[2]||(s[2]=e("div",{class:"text-6xl mb-4"},"🔒",-1)),s[3]||(s[3]=e("h3",{class:"text-xl font-semibold mb-2"},"请先登录",-1)),s[4]||(s[4]=e("p",{class:"text-gray-600 mb-4"},"登录后查看你的礼物记录",-1)),e("button",{onClick:s[0]||(s[0]=(...t)=>u(h).openLoginModal&&u(h).openLoginModal(...t)),class:"btn btn-primary"}," 登录 ")])),x.value?(a(),o("div",De,[e("div",Ie,[s[15]||(s[15]=e("div",{class:"text-6xl mb-4"},"🎉",-1)),s[16]||(s[16]=e("h3",{class:"text-lg font-bold mb-4"},"礼物领取成功！",-1)),r.value?(a(),o("div",Ae,[e("div",Ue,[e("img",{src:r.value.type==="pet"?r.value.item.pet.babyImageUrl:r.value.item.image,alt:r.value.type==="pet"?r.value.item.pet.name:r.value.item.name,class:"w-full h-full object-cover"},null,8,je)]),e("h4",Ge,l(r.value.type==="pet"?r.value.item.nickname||r.value.item.pet.name:r.value.item.name),1),e("p",Re,l(r.value.type==="pet"?"已添加到你的宠物收藏":"盲盒已添加到你的背包"),1)])):d("",!0),e("button",{onClick:s[1]||(s[1]=t=>x.value=!1),class:"btn btn-primary"}," 太棒了！ ")])])):d("",!0)]))}});export{Te as default};
