import{d as x,r,f as h,g as _,c as a,a as t,w as p,v as w,h as y,F as b,i as C,t as d,o as n}from"./index-o0ffgrYm.js";import{seriesApi as k}from"./series-DIVEs8_a.js";const L={class:"container mx-auto px-4 py-8"},S={class:"card p-4 mb-8"},V={class:"flex flex-col md:flex-row gap-4 items-center"},z={class:"flex-1"},B={class:"flex gap-4"},A={key:0,class:"text-center py-8"},M={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},U=["onClick"],$={class:"aspect-square rounded-lg mb-4 overflow-hidden"},j=["src","alt"],q={class:"mb-2",style:{"font-family":"var(--font-heading)","font-size":"var(--text-xl)",color:"var(--color-text-primary)","font-weight":"700"}},D={class:"mb-4",style:{color:"var(--color-text-secondary)","font-family":"var(--font-body)"}},F={class:"flex justify-between items-center"},E={class:"font-bold",style:{"font-size":"var(--text-lg)",color:"var(--color-accent)"}},N={class:"text-sm",style:{color:"var(--color-text-secondary)"}},G=x({__name:"StoreView",setup(P){const v=r([]),f=r(!0),i=r(""),u=r("name"),c=r(""),g=h(()=>{let l=v.value;if(i.value){const e=i.value.toLowerCase();l=l.filter(s=>{var m;return s.name.toLowerCase().includes(e)||((m=s.description)==null?void 0:m.toLowerCase().includes(e))})}return c.value&&(l=l.filter(e=>{switch(c.value){case"low":return e.price<100;case"medium":return e.price>=100&&e.price<=150;case"high":return e.price>150;default:return!0}})),[...l].sort((e,s)=>{switch(u.value){case"name":return e.name.localeCompare(s.name);case"price":return e.price-s.price;case"petCount":return(s.petCount||0)-(e.petCount||0);default:return 0}})});return _(async()=>{try{console.log("开始加载系列数据...");const l=await k.getAll();console.log("系列数据加载成功:",l),v.value=l}catch(l){console.error("加载系列失败:",l),alert("加载系列数据失败，请刷新页面重试")}finally{f.value=!1}}),(l,o)=>(n(),a("div",L,[o[6]||(o[6]=t("div",{class:"text-center mb-12"},[t("h1",{class:"mb-4",style:{"font-family":"var(--font-heading)","font-size":"var(--text-4xl)",color:"var(--color-text-primary)","font-weight":"900"}}," 🛍️ 盲盒商店 "),t("p",{style:{"font-size":"var(--text-lg)",color:"var(--color-text-secondary)","font-family":"var(--font-body)"}}," 今天想遇见谁呢？ ")],-1)),t("div",S,[t("div",V,[t("div",z,[p(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e),type:"text",placeholder:"搜索系列名称或描述...",class:"input w-full"},null,512),[[w,i.value]])]),t("div",B,[p(t("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),class:"input"},o[3]||(o[3]=[t("option",{value:"name"},"按名称排序",-1),t("option",{value:"price"},"按价格排序",-1),t("option",{value:"petCount"},"按宠物数量排序",-1)]),512),[[y,u.value]]),p(t("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>c.value=e),class:"input"},o[4]||(o[4]=[t("option",{value:""},"全部价格",-1),t("option",{value:"low"},"100积分以下",-1),t("option",{value:"medium"},"100-150积分",-1),t("option",{value:"high"},"150积分以上",-1)]),512),[[y,c.value]])])])]),f.value?(n(),a("div",A,o[5]||(o[5]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2",style:{"border-color":"var(--color-accent)"}},null,-1),t("p",{class:"mt-2",style:{color:"var(--color-text-secondary)"}},"加载中...",-1)]))):(n(),a("div",M,[(n(!0),a(b,null,C(g.value,e=>(n(),a("div",{key:e.id,class:"card p-6 cursor-pointer",onClick:s=>l.$router.push(`/series/${e.id}`)},[t("div",$,[t("img",{src:e.image,alt:e.name,class:"w-full h-full object-cover transition-transform duration-300 hover:scale-105"},null,8,j)]),t("h3",q,d(e.name),1),t("p",D,d(e.description),1),t("div",F,[t("span",E," 💰 "+d(e.price)+" 积分 ",1),t("span",N,d(e.petCount||0)+" 只宠物 ",1)])],8,U))),128))]))]))}});export{G as default};
