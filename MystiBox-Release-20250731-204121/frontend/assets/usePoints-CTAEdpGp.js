import{q as _,r as D,f as R}from"./index-o0ffgrYm.js";const c={LIKE_POST:5,RECEIVE_LIKE:10,COMMENT:3,RECEIVE_COMMENT:5,CHAT_MESSAGE:1,SEND_GIFT:15,RECEIVE_GIFT:20,FEED_PET:8,PET_EVOLVE:50,SHARE_PET:25,PET_INTERACTION:2,DRAW_RARE:20,DRAW_SR:50,DRAW_SSR:100,DRAW_UR:200,DAILY_LOGIN:30,DAILY_DRAW:10,DAILY_SHARE:15,DAILY_CHAT:20},a={CHAT_MESSAGE:50,FEED_PET:1,PET_INTERACTION:20};function y(){const s=_(),r=D(new Map),l=R(()=>{var t;return((t=s.user)==null?void 0:t.points)||0}),o=(t,n)=>{const i=`${new Date().toDateString()}-${t}`;return(r.value.get(i)||0)<n},T=t=>{const e=`${new Date().toDateString()}-${t}`,i=r.value.get(e)||0;r.value.set(e,i+1)},E=async(t,n=1)=>{if(!s.user)return!1;const e=c[t]*n;return t==="CHAT_MESSAGE"&&!o("CHAT_MESSAGE",a.CHAT_MESSAGE)||t==="FEED_PET"&&!o("FEED_PET",a.FEED_PET)||t==="PET_INTERACTION"&&!o("PET_INTERACTION",a.PET_INTERACTION)?!1:(s.user.points+=e,["CHAT_MESSAGE","FEED_PET","PET_INTERACTION"].includes(t)&&T(t),A(e),console.log(`èŽ·å¾—ç§¯åˆ†: +${e} (${t})`),!0)},u=async(t,n)=>!s.user||s.user.points<t?!1:(s.user.points-=t,console.log(`æ¶ˆè´¹ç§¯åˆ†: -${t} (${n})`),!0),A=(t,n)=>{const e=document.createElement("div");e.className="fixed top-20 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transform transition-all duration-300",e.innerHTML=`
      <div class="flex items-center space-x-2">
        <span class="text-lg">ðŸ’°</span>
        <span>+${t} ç§¯åˆ†</span>
      </div>
    `,document.body.appendChild(e),setTimeout(()=>{e.style.transform="translateX(100%)",e.style.opacity="0"},2e3),setTimeout(()=>{document.body.removeChild(e)},2500)};return{currentPoints:l,awardPoints:E,spendPoints:u,awardDrawPoints:async t=>{const e={R:"DRAW_RARE",SR:"DRAW_SR",SSR:"DRAW_SSR",UR:"DRAW_UR"}[t];e&&await E(e)},claimDailyLogin:async()=>{const t=new Date().toDateString();return localStorage.getItem("lastLoginDate")!==t?(localStorage.setItem("lastLoginDate",t),await E("DAILY_LOGIN"),!0):!1},checkDailyLimit:o,POINTS_REWARDS:c,DAILY_LIMITS:a}}export{y as u};
